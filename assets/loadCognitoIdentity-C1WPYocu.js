var me=Object.defineProperty;var he=(e,n,t)=>n in e?me(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var i=(e,n,t)=>he(e,typeof n!="symbol"?n+"":n,t);import{c as xe,r as Ee,n as Se,g as Pe,E as ve,b as fe,d as we,e as Ie,p as Ce,N as ge,A as Re,f as be,h as Ae,S as ze,D as Fe,i as _e,j as De,k as ke,l as $e,m as Oe,o as He,q as Ue,t as Ne,u as Le,v as Te,w as Me,x as Ge,y as qe,C as Be,z as je,B as Ve,F as Je,G as We,H as Ke,I as Xe,J as Qe,K as Ye,L as Ze,M as et,O as tt,P as nt,Q as st,R as ot,T as rt,U as A,V as it,W as h,a as ee,X as te}from"./index-BLWHFE7r.js";import{t as at,f as dt,a as ct,b as lt,s as ut,F as pt,H as yt,e as b,c as mt,p as ht,d as xt,g as ne}from"./index-DIlONTLH.js";const se=(e,n)=>{const t={};for(const s in n)Et(t,e,n,s);return t},Et=(e,n,t,s)=>{if(n!==null){let r=t[s];typeof r=="function"&&(r=[,r]);const[p=St,E=Pt,P=s]=r;(typeof p=="function"&&p(n[P])||typeof p!="function"&&p)&&(e[s]=E(n[P]));return}let[o,d]=t[s];if(typeof d=="function"){let r;const p=o===void 0&&(r=d())!=null,E=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;p?e[s]=r:E&&(e[s]=d())}else{const r=o===void 0&&d!=null,p=typeof o=="function"&&!!o(d)||typeof o!="function"&&!!o;(r||p)&&(e[s]=d)}},St=e=>e!=null,Pt=e=>e,u=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(n=>n!=null).map(u);if(typeof e=="object"){const n={};for(const t of Object.keys(e))e[t]!=null&&(n[t]=u(e[t]));return n}return e},z=(e,n)=>xe(e,n).then(t=>{if(t.length)try{return JSON.parse(t)}catch(s){throw(s==null?void 0:s.name)==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:t}),s}return{}}),vt=async(e,n)=>{const t=await z(e,n);return t.message=t.message??t.Message,t},ft=(e,n)=>{const t=(d,r)=>Object.keys(d).find(p=>p.toLowerCase()===r.toLowerCase()),s=d=>{let r=d;return typeof r=="number"&&(r=r.toString()),r.indexOf(",")>=0&&(r=r.split(",")[0]),r.indexOf(":")>=0&&(r=r.split(":")[0]),r.indexOf("#")>=0&&(r=r.split("#")[1]),r},o=t(e.headers,"x-amzn-errortype");if(o!==void 0)return s(e.headers[o]);if(n.code!==void 0)return s(n.code);if(n.__type!==void 0)return s(n.__type)},wt=async(e,n,t)=>({operation:Pe(n).operation,region:await Se(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function It(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function g(e){return{schemeId:"smithy.api#noAuth"}}const Ct=e=>{const n=[];switch(e.operation){case"GetCredentialsForIdentity":{n.push(g());break}case"GetId":{n.push(g());break}case"GetOpenIdToken":{n.push(g());break}case"UnlinkIdentity":{n.push(g());break}default:n.push(It(e))}return n},gt=e=>({...Ee(e)}),Rt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),oe={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},bt="3.744.0",At={version:bt},re="required",c="fn",l="argv",f="ref",B=!0,j="isSet",C="booleanEquals",v="error",x="endpoint",S="tree",F="PartitionResult",_="getAttr",w="stringEquals",V={[re]:!1,type:"String"},J={[re]:!0,default:!1,type:"Boolean"},W={[f]:"Endpoint"},ie={[c]:C,[l]:[{[f]:"UseFIPS"},!0]},ae={[c]:C,[l]:[{[f]:"UseDualStack"},!0]},a={},I={[f]:"Region"},K={[c]:_,[l]:[{[f]:F},"supportsFIPS"]},de={[f]:F},X={[c]:C,[l]:[!0,{[c]:_,[l]:[de,"supportsDualStack"]}]},Q=[ie],Y=[ae],Z=[I],zt={parameters:{Region:V,UseDualStack:J,UseFIPS:J,Endpoint:V},rules:[{conditions:[{[c]:j,[l]:[W]}],rules:[{conditions:Q,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:v},{conditions:Y,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:v},{endpoint:{url:W,properties:a,headers:a},type:x}],type:S},{conditions:[{[c]:j,[l]:Z}],rules:[{conditions:[{[c]:"aws.partition",[l]:Z,assign:F}],rules:[{conditions:[ie,ae],rules:[{conditions:[{[c]:C,[l]:[B,K]},X],rules:[{conditions:[{[c]:w,[l]:[I,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:w,[l]:[I,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:w,[l]:[I,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:w,[l]:[I,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:a,headers:a},type:x},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:x}],type:S},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:v}],type:S},{conditions:Q,rules:[{conditions:[{[c]:C,[l]:[K,B]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:x}],type:S},{error:"FIPS is enabled but this partition does not support FIPS",type:v}],type:S},{conditions:Y,rules:[{conditions:[X],rules:[{conditions:[{[c]:w,[l]:["aws",{[c]:_,[l]:[de,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:a,headers:a},type:x},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:x}],type:S},{error:"DualStack is enabled but this partition does not support DualStack",type:v}],type:S},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:x}],type:S}],type:S},{error:"Invalid Configuration: Missing Region",type:v}]},Ft=zt,_t=new ve({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Dt=(e,n={})=>_t.get(e,()=>fe(Ft,{endpointParams:e,logger:n.logger}));Ie.aws=we;const kt=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??lt,base64Encoder:(e==null?void 0:e.base64Encoder)??ct,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Dt,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Ct,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new Re},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new be}],logger:(e==null?void 0:e.logger)??new ge,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Ce,utf8Decoder:(e==null?void 0:e.utf8Decoder)??dt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??at}),$t=e=>{const n=Ae(e),t=()=>n().then(Ue),s=kt(e);return{...s,...e,runtime:"browser",defaultsMode:n,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??$e,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??ke({serviceId:s.serviceId,clientVersion:At.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??De,region:(e==null?void 0:e.region)??_e("Region is missing"),requestHandler:pt.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||Fe),sha256:(e==null?void 0:e.sha256)??ze,streamCollector:(e==null?void 0:e.streamCollector)??ut,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(He)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Oe))}},Ot=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(o){const d=n.findIndex(r=>r.schemeId===o.schemeId);d===-1?n.push(o):n.splice(d,1,o)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){s=o},credentials(){return s}}},Ht=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),R=e=>e,Ut=(e,n)=>{const t={...R(Te(e)),...R(Le(e)),...R(Ne(e)),...R(Ot(e))};return n.forEach(s=>s.configure(t)),{...e,...qe(t),...Ge(t),...Me(t),...Ht(t)}};class ln extends Be{constructor(...[t]){const s=$t(t||{}),o=Rt(s),d=je(o),r=Ve(d),p=Je(r),E=st(p),P=We(E),pe=gt(P),q=Ut(pe,(t==null?void 0:t.extensions)||[]);super(q);i(this,"config");this.config=q,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Qe(this.config)),this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(Ze(this.config)),this.middlewareStack.use(et(this.config)),this.middlewareStack.use(tt(this.config,{httpAuthSchemeParametersProvider:wt,identityProviderConfigProvider:async ye=>new ot({"aws.auth#sigv4":ye.credentials})})),this.middlewareStack.use(nt(this.config))}destroy(){super.destroy()}}class y extends rt{constructor(n){super(n),Object.setPrototypeOf(this,y.prototype)}}class D extends y{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});i(this,"name","InternalErrorException");i(this,"$fault","server");Object.setPrototypeOf(this,D.prototype)}}class k extends y{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});i(this,"name","InvalidParameterException");i(this,"$fault","client");Object.setPrototypeOf(this,k.prototype)}}class $ extends y{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});i(this,"name","LimitExceededException");i(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}}class O extends y{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});i(this,"name","NotAuthorizedException");i(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}}class H extends y{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});i(this,"name","ResourceConflictException");i(this,"$fault","client");Object.setPrototypeOf(this,H.prototype)}}class U extends y{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});i(this,"name","TooManyRequestsException");i(this,"$fault","client");Object.setPrototypeOf(this,U.prototype)}}class N extends y{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});i(this,"name","ResourceNotFoundException");i(this,"$fault","client");Object.setPrototypeOf(this,N.prototype)}}class L extends y{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});i(this,"name","ExternalServiceException");i(this,"$fault","client");Object.setPrototypeOf(this,L.prototype)}}class T extends y{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});i(this,"name","InvalidIdentityPoolConfigurationException");i(this,"$fault","client");Object.setPrototypeOf(this,T.prototype)}}class M extends y{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});i(this,"name","DeveloperUserAlreadyRegisteredException");i(this,"$fault","client");Object.setPrototypeOf(this,M.prototype)}}class G extends y{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});i(this,"name","ConcurrentModificationException");i(this,"$fault","client");Object.setPrototypeOf(this,G.prototype)}}const Nt=e=>({...e,...e.Logins&&{Logins:A}}),Lt=e=>({...e,...e.SecretKey&&{SecretKey:A}}),Tt=e=>({...e,...e.Credentials&&{Credentials:Lt(e.Credentials)}}),Mt=e=>({...e,...e.Logins&&{Logins:A}}),Gt=async(e,n)=>{const t=ue("GetCredentialsForIdentity");let s;return s=JSON.stringify(u(e)),le(n,t,"/",void 0,s)},qt=async(e,n)=>{const t=ue("GetId");let s;return s=JSON.stringify(u(e)),le(n,t,"/",void 0,s)},Bt=async(e,n)=>{if(e.statusCode>=300)return ce(e,n);const t=await z(e.body,n);let s={};return s=on(t),{$metadata:m(e),...s}},jt=async(e,n)=>{if(e.statusCode>=300)return ce(e,n);const t=await z(e.body,n);let s={};return s=u(t),{$metadata:m(e),...s}},ce=async(e,n)=>{const t={...e,body:await vt(e.body,n)},s=ft(e,t.body);switch(s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Kt(t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Qt(t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Yt(t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Zt(t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await en(t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await nn(t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await tn(t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Wt(t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Xt(t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Jt(t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Vt(t);default:const o=t.body;return rn({output:e,parsedBody:o,errorCode:s})}},Vt=async(e,n)=>{const t=e.body,s=u(t),o=new G({$metadata:m(e),...s});return h(o,t)},Jt=async(e,n)=>{const t=e.body,s=u(t),o=new M({$metadata:m(e),...s});return h(o,t)},Wt=async(e,n)=>{const t=e.body,s=u(t),o=new L({$metadata:m(e),...s});return h(o,t)},Kt=async(e,n)=>{const t=e.body,s=u(t),o=new D({$metadata:m(e),...s});return h(o,t)},Xt=async(e,n)=>{const t=e.body,s=u(t),o=new T({$metadata:m(e),...s});return h(o,t)},Qt=async(e,n)=>{const t=e.body,s=u(t),o=new k({$metadata:m(e),...s});return h(o,t)},Yt=async(e,n)=>{const t=e.body,s=u(t),o=new $({$metadata:m(e),...s});return h(o,t)},Zt=async(e,n)=>{const t=e.body,s=u(t),o=new O({$metadata:m(e),...s});return h(o,t)},en=async(e,n)=>{const t=e.body,s=u(t),o=new H({$metadata:m(e),...s});return h(o,t)},tn=async(e,n)=>{const t=e.body,s=u(t),o=new N({$metadata:m(e),...s});return h(o,t)},nn=async(e,n)=>{const t=e.body,s=u(t),o=new U({$metadata:m(e),...s});return h(o,t)},sn=(e,n)=>se(e,{AccessKeyId:b,Expiration:t=>mt(ht(xt(t))),SecretKey:b,SessionToken:b}),on=(e,n)=>se(e,{Credentials:t=>sn(t),IdentityId:b}),m=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),rn=it(y),le=async(e,n,t,s,o)=>{const{hostname:d,protocol:r="https",port:p,path:E}=await e.endpoint(),P={protocol:r,hostname:d,port:p,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+t:E+t,headers:n};return o!==void 0&&(P.body=o),new yt(P)};function ue(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class un extends ee.classBuilder().ep(oe).m(function(n,t,s,o){return[ne(s,this.serialize,this.deserialize),te(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(Nt,Tt).ser(Gt).de(Bt).build(){}class pn extends ee.classBuilder().ep(oe).m(function(n,t,s,o){return[ne(s,this.serialize,this.deserialize),te(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Mt,void 0).ser(qt).de(jt).build(){}export{ln as CognitoIdentityClient,un as GetCredentialsForIdentityCommand,pn as GetIdCommand};
